<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BTC Predictor — System Audit Report | 2 Marzo 2026</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&family=Syne:wght@400;600;700;800&display=swap');

  :root {
    --bg: #0a0e17;
    --bg2: #0d1321;
    --bg3: #111827;
    --card: #131b2e;
    --border: #1e293b;
    --accent: #00d4aa;
    --accent2: #00b4d8;
    --orange: #f7931a;
    --red: #ef4444;
    --green: #22c55e;
    --yellow: #eab308;
    --text: #e2e8f0;
    --muted: #64748b;
    --code-bg: #1a1f2e;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    line-height: 1.7;
    padding: 0;
  }

  /* HEADER */
  .header {
    background: linear-gradient(135deg, #0a0e17 0%, #0f1a2e 50%, #0a1628 100%);
    border-bottom: 1px solid var(--border);
    padding: 60px 40px 50px;
    position: relative;
    overflow: hidden;
  }
  .header::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -10%;
    width: 120%;
    height: 200%;
    background: radial-gradient(ellipse at 30% 50%, rgba(0,212,170,0.06) 0%, transparent 60%),
                radial-gradient(ellipse at 70% 50%, rgba(0,180,216,0.04) 0%, transparent 50%);
    pointer-events: none;
  }
  .header-inner {
    max-width: 1200px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }
  .header h1 {
    font-family: 'Syne', sans-serif;
    font-size: 42px;
    font-weight: 800;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 8px;
    letter-spacing: -1px;
  }
  .header .subtitle {
    color: var(--muted);
    font-size: 15px;
    font-weight: 300;
  }
  .header .meta {
    margin-top: 20px;
    display: flex;
    gap: 24px;
    flex-wrap: wrap;
  }
  .meta-chip {
    background: rgba(0,212,170,0.08);
    border: 1px solid rgba(0,212,170,0.2);
    border-radius: 8px;
    padding: 8px 16px;
    font-size: 12px;
    color: var(--accent);
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .meta-chip.warn {
    background: rgba(234,179,8,0.08);
    border-color: rgba(234,179,8,0.25);
    color: var(--yellow);
  }
  .meta-chip.danger {
    background: rgba(239,68,68,0.08);
    border-color: rgba(239,68,68,0.25);
    color: var(--red);
  }

  /* NAV */
  .nav {
    background: var(--bg2);
    border-bottom: 1px solid var(--border);
    padding: 0 40px;
    position: sticky;
    top: 0;
    z-index: 100;
    overflow-x: auto;
    white-space: nowrap;
  }
  .nav-inner {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    gap: 0;
  }
  .nav a {
    color: var(--muted);
    text-decoration: none;
    padding: 14px 18px;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
  }
  .nav a:hover, .nav a.active {
    color: var(--accent);
    border-bottom-color: var(--accent);
  }

  /* MAIN */
  .main {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 40px 80px;
  }

  /* SECTION */
  .section {
    margin-bottom: 56px;
  }
  .section-header {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 24px;
    padding-bottom: 14px;
    border-bottom: 1px solid var(--border);
  }
  .section-num {
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: var(--bg);
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: 14px;
    width: 36px;
    height: 36px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .section h2 {
    font-family: 'Syne', sans-serif;
    font-size: 24px;
    font-weight: 700;
    color: var(--text);
    letter-spacing: -0.5px;
  }

  /* CARDS */
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 16px;
  }
  .card h3 {
    font-family: 'Syne', sans-serif;
    font-size: 16px;
    font-weight: 600;
    color: var(--accent);
    margin-bottom: 12px;
  }
  .card p, .card li {
    color: var(--text);
    font-size: 13px;
    line-height: 1.8;
  }
  .card ul { padding-left: 20px; }
  .card li { margin-bottom: 4px; }

  /* GRID */
  .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; }
  .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
  @media (max-width: 900px) {
    .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
  }

  /* STAT BOX */
  .stat-box {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    text-align: center;
  }
  .stat-box .label {
    font-size: 11px;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 8px;
  }
  .stat-box .value {
    font-family: 'Syne', sans-serif;
    font-size: 28px;
    font-weight: 800;
    color: var(--text);
  }
  .stat-box .value.green { color: var(--green); }
  .stat-box .value.red { color: var(--red); }
  .stat-box .value.accent { color: var(--accent); }
  .stat-box .value.yellow { color: var(--yellow); }
  .stat-box .value.orange { color: var(--orange); }
  .stat-box .sub {
    font-size: 11px;
    color: var(--muted);
    margin-top: 4px;
  }

  /* TABLE */
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }
  table th {
    background: var(--bg3);
    color: var(--accent);
    font-weight: 600;
    text-align: left;
    padding: 10px 14px;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 1px solid var(--border);
  }
  table td {
    padding: 10px 14px;
    border-bottom: 1px solid rgba(30,41,59,0.5);
    color: var(--text);
  }
  table tr:hover td {
    background: rgba(0,212,170,0.03);
  }
  .severity-critical {
    background: rgba(239,68,68,0.15);
    color: var(--red);
    padding: 2px 8px;
    border-radius: 4px;
    font-weight: 700;
    font-size: 11px;
  }
  .severity-high {
    background: rgba(234,179,8,0.15);
    color: var(--yellow);
    padding: 2px 8px;
    border-radius: 4px;
    font-weight: 600;
    font-size: 11px;
  }
  .severity-medium {
    background: rgba(0,180,216,0.15);
    color: var(--accent2);
    padding: 2px 8px;
    border-radius: 4px;
    font-weight: 500;
    font-size: 11px;
  }
  .severity-low {
    background: rgba(100,116,139,0.2);
    color: var(--muted);
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
  }

  /* SCORE BAR */
  .score-row {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 10px;
    font-size: 13px;
  }
  .score-label { width: 180px; color: var(--muted); flex-shrink: 0; }
  .score-bar-bg {
    flex: 1;
    height: 8px;
    background: var(--bg3);
    border-radius: 4px;
    overflow: hidden;
  }
  .score-bar {
    height: 100%;
    border-radius: 4px;
    transition: width 0.6s ease;
  }
  .score-val { width: 50px; text-align: right; font-weight: 700; }

  /* CODE */
  code {
    background: var(--code-bg);
    color: var(--accent);
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 12px;
  }
  pre {
    background: var(--code-bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 16px;
    overflow-x: auto;
    font-size: 12px;
    line-height: 1.6;
    margin: 12px 0;
    color: var(--text);
  }

  /* BADGE */
  .badge {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.3px;
  }
  .badge.green { background: rgba(34,197,94,0.15); color: var(--green); }
  .badge.red { background: rgba(239,68,68,0.15); color: var(--red); }
  .badge.yellow { background: rgba(234,179,8,0.15); color: var(--yellow); }
  .badge.blue { background: rgba(0,180,216,0.15); color: var(--accent2); }

  /* PRIORITY TAG */
  .ptag {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 10px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: 700;
  }
  .ptag.p0 { background: rgba(239,68,68,0.2); color: var(--red); }
  .ptag.p1 { background: rgba(234,179,8,0.2); color: var(--yellow); }
  .ptag.p2 { background: rgba(0,180,216,0.2); color: var(--accent2); }

  /* ALERT BOX */
  .alert {
    border-radius: 10px;
    padding: 16px 20px;
    margin-bottom: 16px;
    display: flex;
    gap: 12px;
    align-items: flex-start;
  }
  .alert.critical {
    background: rgba(239,68,68,0.08);
    border: 1px solid rgba(239,68,68,0.25);
  }
  .alert.warning {
    background: rgba(234,179,8,0.08);
    border: 1px solid rgba(234,179,8,0.25);
  }
  .alert.info {
    background: rgba(0,212,170,0.06);
    border: 1px solid rgba(0,212,170,0.15);
  }
  .alert .icon { font-size: 18px; flex-shrink: 0; margin-top: 2px; }
  .alert .body { flex: 1; }
  .alert .title { font-weight: 700; margin-bottom: 4px; }
  .alert.critical .title { color: var(--red); }
  .alert.warning .title { color: var(--yellow); }
  .alert.info .title { color: var(--accent); }

  /* DECISION BOX */
  .decision-box {
    background: linear-gradient(135deg, rgba(0,212,170,0.06), rgba(0,180,216,0.04));
    border: 1px solid rgba(0,212,170,0.2);
    border-radius: 12px;
    padding: 24px;
    margin: 20px 0;
  }
  .decision-box h4 {
    font-family: 'Syne', sans-serif;
    color: var(--accent);
    font-size: 15px;
    margin-bottom: 12px;
  }
  .decision-box ul { padding-left: 20px; }
  .decision-box li { margin-bottom: 6px; font-size: 13px; }

  /* FOOTER */
  .footer {
    max-width: 1200px;
    margin: 0 auto;
    padding: 30px 40px;
    border-top: 1px solid var(--border);
    color: var(--muted);
    font-size: 11px;
    text-align: center;
  }

  /* PRINT */
  @media print {
    body { background: #fff; color: #111; }
    .nav { display: none; }
    .card { border: 1px solid #ddd; background: #f9f9f9; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <div class="header-inner">
    <h1>BTC Predictor System Audit</h1>
    <div class="subtitle">Analisi completa: Backend, ML Pipeline, Frontend, Infrastruttura, Dati</div>
    <div class="meta">
      <div class="meta-chip">2 Marzo 2026 &middot; 02:51 UTC</div>
      <div class="meta-chip">v2.5.2 &middot; LIVE</div>
      <div class="meta-chip warn">Ghost WR 37.2%</div>
      <div class="meta-chip danger">Contrarian WR 62.8%</div>
      <div class="meta-chip">Equity $90.47</div>
      <div class="meta-chip">204 segnali totali</div>
    </div>
  </div>
</div>

<!-- NAV -->
<div class="nav">
  <div class="nav-inner">
    <a href="#executive">Executive</a>
    <a href="#data">Dati Live</a>
    <a href="#ml">ML Pipeline</a>
    <a href="#backend">Backend</a>
    <a href="#frontend">Frontend</a>
    <a href="#infra">Infra</a>
    <a href="#scores">Scorecard</a>
    <a href="#decisions">Decisioni</a>
    <a href="#roadmap">Roadmap</a>
  </div>
</div>

<!-- MAIN -->
<div class="main">

<!-- ============================================================ -->
<!-- SECTION 1: EXECUTIVE SUMMARY -->
<!-- ============================================================ -->
<div class="section" id="executive">
  <div class="section-header">
    <div class="section-num">1</div>
    <h2>Executive Summary</h2>
  </div>

  <div class="alert critical">
    <div class="icon">&#9888;</div>
    <div class="body">
      <div class="title">Il modello predice al contrario</div>
      <p>Ghost WR 37.2% su 152 segnali valutati. Invertendo ogni segnale, il WR sale a <strong>62.8%</strong>. Il modello Gemini Flash cattura segnale reale dal mercato ma lo interpreta al contrario, a causa di un prompt asimmetrico con 5 regole bearish vs 1 bullish.</p>
    </div>
  </div>

  <div class="alert warning">
    <div class="icon">&#9888;</div>
    <div class="body">
      <div class="title">La confidence e' inversamente correlata con l'accuratezza</div>
      <p>Piu' alta la confidence, peggio performa il modello: 0.55-0.60 = 40.5% WR, 0.65-0.70 = 20% WR, >0.70 = 0% WR. La calibration table in app.py e' scollegata dalla realta' (fino a 20% di scarto).</p>
    </div>
  </div>

  <div class="alert info">
    <div class="icon">&#8505;</div>
    <div class="body">
      <div class="title">0 bet reali piazzate — nessun rischio finanziario attuale</div>
      <p>Il bot e' live ma opera solo in ghost mode (XGB gate richiede 100 clean bets, attualmente 8). L'equity di $90.47 e' intatta. C'e' tempo per fixare prima che il bot inizi a tradare con soldi veri.</p>
    </div>
  </div>

  <div class="grid-4" style="margin-top: 24px;">
    <div class="stat-box">
      <div class="label">Ghost Win Rate</div>
      <div class="value red">37.2%</div>
      <div class="sub">152 segnali valutati</div>
    </div>
    <div class="stat-box">
      <div class="label">Contrarian WR</div>
      <div class="value green">62.8%</div>
      <div class="sub">Inverti = profitto</div>
    </div>
    <div class="stat-box">
      <div class="label">Segnali / Giorno</div>
      <div class="value accent">~162</div>
      <div class="sub">1 ogni ~9 min</div>
    </div>
    <div class="stat-box">
      <div class="label">Wallet Equity</div>
      <div class="value">$90.47</div>
      <div class="sub">0 bet reali</div>
    </div>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 2: DATI LIVE (SUPABASE) -->
<!-- ============================================================ -->
<div class="section" id="data">
  <div class="section-header">
    <div class="section-num">2</div>
    <h2>Analisi Dati Live</h2>
  </div>

  <div class="card">
    <h3>Distribuzione Direzione — Forte Bias DOWN</h3>
    <div class="grid-2" style="margin-bottom: 16px;">
      <div class="stat-box">
        <div class="label">Segnali DOWN</div>
        <div class="value red">143</div>
        <div class="sub">70.1% del totale</div>
      </div>
      <div class="stat-box">
        <div class="label">Segnali UP</div>
        <div class="value green">61</div>
        <div class="sub">29.9% del totale</div>
      </div>
    </div>
    <p>Il modello produce segnali DOWN con frequenza <strong>2.3x</strong> rispetto a UP. Root cause: prompt wf01B con 5 regole bearish vs 1 bullish.</p>
  </div>

  <div class="card">
    <h3>Ghost WR per Direzione</h3>
    <table>
      <tr><th>Direzione</th><th>Totale</th><th>Corretti</th><th>Ghost WR</th><th>Nota</th></tr>
      <tr><td><span class="badge red">DOWN</span></td><td>109</td><td>38</td><td><strong style="color:var(--red)">34.9%</strong></td><td>Sotto coin flip — il modello sbaglia sistematicamente</td></tr>
      <tr><td><span class="badge green">UP</span></td><td>43</td><td>21</td><td><strong style="color:var(--yellow)">48.8%</strong></td><td>Vicino a coin flip — molto meglio</td></tr>
      <tr style="background:rgba(0,212,170,0.04)"><td><strong>Totale</strong></td><td><strong>152</strong></td><td><strong>59</strong></td><td><strong>38.8%</strong></td><td>Media pesata dal bias DOWN</td></tr>
    </table>
    <p style="margin-top: 12px; color: var(--muted);">Se il bot filtrasse SOLO i segnali UP, il WR salirebbe vicino al 49%. Se invertisse tutti i segnali: <strong style="color:var(--green)">61.2%</strong>.</p>
  </div>

  <div class="card">
    <h3>Ghost WR per Confidence — Inversione Paradossale</h3>
    <table>
      <tr><th>Confidence</th><th>Segnali</th><th>Corretti</th><th>WR</th><th>Trend</th></tr>
      <tr><td>&lt; 0.55</td><td>18</td><td>7</td><td>38.9%</td><td>Baseline</td></tr>
      <tr><td>0.55 - 0.60</td><td>111</td><td>45</td><td><strong style="color:var(--green)">40.5%</strong></td><td>Miglior bucket</td></tr>
      <tr><td>0.60 - 0.65</td><td>17</td><td>6</td><td>35.3%</td><td style="color:var(--yellow)">In calo</td></tr>
      <tr><td>0.65 - 0.70</td><td>5</td><td>1</td><td style="color:var(--red)">20.0%</td><td style="color:var(--red)">Crollo</td></tr>
      <tr><td>&gt; 0.70</td><td>1</td><td>0</td><td style="color:var(--red)">0.0%</td><td style="color:var(--red)">Zero</td></tr>
    </table>
    <p style="margin-top: 12px;">La confidence e' un <strong>indicatore inverso</strong>: piu' il modello e' sicuro, piu' sbaglia. Confidence alta = late-consensus trap.</p>
  </div>

  <div class="card">
    <h3>Le 5 Ore Peggiori (UTC)</h3>
    <table>
      <tr><th>Ora UTC</th><th>Ghost WR</th><th>Contesto</th></tr>
      <tr><td>05:00</td><td style="color:var(--red)"><strong>10.0%</strong></td><td>Asia pre-apertura, bassa liquidita'</td></tr>
      <tr><td>10:00</td><td style="color:var(--red)"><strong>10.0%</strong></td><td>Europa mattina, overlap debole</td></tr>
      <tr><td>00:00</td><td style="color:var(--red)"><strong>12.5%</strong></td><td>Funding settlement UTC (shock periodico)</td></tr>
      <tr><td>07:00</td><td style="color:var(--red)"><strong>20.0%</strong></td><td>Asia tarda, Europa pre-apertura</td></tr>
      <tr><td>01:00</td><td style="color:var(--red)"><strong>22.2%</strong></td><td>Post-settlement, volume minimo</td></tr>
    </table>
    <p style="margin-top: 12px;">Le ore 00-10 UTC hanno WR dal 10% al 22%. Il dead hours filter e' <strong>supportato dai dati</strong>.</p>
  </div>

  <div class="card">
    <h3>Streak Analysis</h3>
    <div class="grid-2">
      <div class="stat-box">
        <div class="label">Max Win Streak</div>
        <div class="value green">8</div>
      </div>
      <div class="stat-box">
        <div class="label">Max Loss Streak</div>
        <div class="value red">13</div>
        <div class="sub">Probabilita': 0.32% (raro ma reale)</div>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Qualita' Dati — Campi NULL</h3>
    <table>
      <tr><th>Campo</th><th>NULL</th><th>%</th><th>Status</th></tr>
      <tr><td>ghost_correct</td><td>52</td><td>25.5%</td><td><span class="badge blue">Atteso (T+30min)</span></td></tr>
      <tr><td>signal_price</td><td>26</td><td>12.7%</td><td><span class="badge yellow">Problema</span></td></tr>
      <tr><td>source_workflow</td><td>170</td><td>83.3%</td><td><span class="badge yellow">Pre-tracing v7</span></td></tr>
      <tr><td>confidence</td><td>0</td><td>0%</td><td><span class="badge green">OK</span></td></tr>
      <tr><td>direction</td><td>0</td><td>0%</td><td><span class="badge green">OK</span></td></tr>
    </table>
    <p style="margin-top: 12px;"><strong>26 record senza signal_price</strong> — impossibile calcolare PnL/slippage per questi segnali. Da investigare.</p>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 3: ML PIPELINE -->
<!-- ============================================================ -->
<div class="section" id="ml">
  <div class="section-header">
    <div class="section-num">3</div>
    <h2>ML Pipeline</h2>
  </div>

  <div class="alert critical">
    <div class="icon">&#9888;</div>
    <div class="body">
      <div class="title">CRITICAL — Dataset di sole 16 ore (28 Feb - 1 Mar)</div>
      <p>Il modello XGBoost e' trainato su 162 samples da un singolo episodio di mercato. Zero diversita' temporale: solo weekend, solo Fear (F&G 11-50), zero regime RANGING, dow_sin/dow_cos costanti. Il modello fallira' catastroficamente in bull market (non ha mai visto Fear & Greed > 50).</p>
    </div>
  </div>

  <div class="alert critical">
    <div class="icon">&#9888;</div>
    <div class="body">
      <div class="title">CRITICAL — Feature Mismatch Train vs Inference</div>
      <p>Il training include <code>regime_label</code> (12 features), ma <code>_run_xgb_gate()</code> in app.py costruisce solo 11 features. Se un retrain include regime_label, il prossimo <code>/place-bet</code> crashera' con dimension mismatch.</p>
    </div>
  </div>

  <div class="card">
    <h3>Overfitting — Gap CV Shuffle vs Walk-Forward</h3>
    <table>
      <tr><th>Modello</th><th>CV Shuffle</th><th>Walk-Forward</th><th>Gap</th><th>Giudizio</th></tr>
      <tr><td>Direction</td><td>97.5%</td><td>87.4%</td><td style="color:var(--yellow)">+10.1%</td><td><span class="severity-high">OVERFITTING</span></td></tr>
      <tr><td>Correctness</td><td>78.4%</td><td>52.6%</td><td style="color:var(--red)">+25.8%</td><td><span class="severity-critical">GRAVE</span></td></tr>
    </table>
    <p style="margin-top: 12px;">Il correctness model ha un gap del 25.8% — praticamente random in walk-forward. E' trainato sulle stesse features del direction model senza la direzione LLM come input, rendendo l'architettura a 2 modelli difettosa by design.</p>
  </div>

  <div class="card">
    <h3>Feature Importance — Direction Model</h3>
    <table>
      <tr><th>#</th><th>Feature</th><th>Importanza</th><th>Note</th></tr>
      <tr><td>1</td><td>confidence</td><td><strong>33.0%</strong></td><td>Dominante — ma inversamente correlata al WR</td></tr>
      <tr><td>2</td><td>technical_score</td><td><strong>30.9%</strong></td><td>TA aggregato</td></tr>
      <tr><td>3</td><td>technical_bias_score</td><td>19.5%</td><td>Bias direzionale</td></tr>
      <tr><td>4</td><td>hour_cos</td><td>6.9%</td><td>Cyclical time</td></tr>
      <tr><td>5</td><td>rsi14</td><td>4.0%</td><td>Market structure</td></tr>
      <tr><td>6</td><td>hour_sin</td><td>3.5%</td><td>Cyclical time</td></tr>
      <tr><td>7</td><td>fear_greed_value</td><td>1.9%</td><td>Solo Fear zone (11-50)</td></tr>
      <tr><td>8-12</td><td>session, fg_fear, dow_*, regime</td><td style="color:var(--muted)">0.0%</td><td style="color:var(--red)">Zero importanza — features morte</td></tr>
    </table>
    <p style="margin-top: 12px;">L'84% della predizione dipende da 3 features LLM-derived (confidence, technical_score, bias_score). Il modello XGBoost sta essenzialmente amplificando il segnale LLM, non aggiungendo alpha indipendente.</p>
  </div>

  <div class="card">
    <h3>Calibration Table — Realta' vs Hardcoded</h3>
    <table>
      <tr><th>Bucket</th><th>WR Hardcoded (app.py)</th><th>WR Reale</th><th>Scarto</th></tr>
      <tr><td>[0.50, 0.55)</td><td>44.2%</td><td>38.9%</td><td style="color:var(--yellow)">-5.3%</td></tr>
      <tr><td>[0.55, 0.60)</td><td>45.0%</td><td>40.5%</td><td style="color:var(--yellow)">-4.5%</td></tr>
      <tr><td>[0.60, 0.62)</td><td>57.1%</td><td>35.3%</td><td style="color:var(--red)"><strong>-21.8%</strong></td></tr>
      <tr><td>[0.65, 0.70)</td><td>45.5%</td><td>20.0%</td><td style="color:var(--red)"><strong>-25.5%</strong></td></tr>
      <tr><td>[0.70, 1.00)</td><td>50.0%</td><td>0.0%</td><td style="color:var(--red)"><strong>-50.0%</strong></td></tr>
    </table>
    <p style="margin-top: 12px;">La calibration table e' <strong>completamente scollegata dalla realta'</strong>. Scarti fino al 50%. Il bet sizing basato su questi valori porterebbe a position sizing errato.</p>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 4: BACKEND -->
<!-- ============================================================ -->
<div class="section" id="backend">
  <div class="section-header">
    <div class="section-num">4</div>
    <h2>Backend (app.py — 6,276 linee)</h2>
  </div>

  <div class="grid-3" style="margin-bottom: 24px;">
    <div class="stat-box">
      <div class="label">Endpoints</div>
      <div class="value accent">50+</div>
    </div>
    <div class="stat-box">
      <div class="label">Guard Functions</div>
      <div class="value">5</div>
      <div class="sub">Auth, Rate, Pre-flight, XGB, Drift</div>
    </div>
    <div class="stat-box">
      <div class="label">Thread Locks</div>
      <div class="value">3</div>
      <div class="sub">nonce, model, rate</div>
    </div>
  </div>

  <div class="card">
    <h3>Finding Critici Backend</h3>
    <table>
      <tr><th>#</th><th>Severita'</th><th>Linea</th><th>Issue</th><th>Impatto</th></tr>
      <tr><td>1</td><td><span class="severity-critical">CRITICAL</span></td><td>1331</td><td>Rate limit usa <code>request.remote_addr</code> (sempre LB IP su Railway)</td><td>Rate limit bypassato in produzione</td></tr>
      <tr><td>2</td><td><span class="severity-high">HIGH</span></td><td>4572</td><td>Nonce collision Polygon senza retry/backoff</td><td>On-chain audit trail incompleto</td></tr>
      <tr><td>3</td><td><span class="severity-high">HIGH</span></td><td>1594</td><td>Pyramid PATCH senza idempotency check</td><td>Double-pyramid su retry</td></tr>
      <tr><td>4</td><td><span class="severity-medium">MEDIUM</span></td><td>44-59</td><td>CSP con <code>'unsafe-inline'</code></td><td>XSS possibile</td></tr>
      <tr><td>5</td><td><span class="severity-medium">MEDIUM</span></td><td>108+</td><td>Bare <code>except Exception: pass</code> (errori silenziosi)</td><td>Bug invisibili in produzione</td></tr>
      <tr><td>6</td><td><span class="severity-low">LOW</span></td><td>4507</td><td>RPC URL Polygon hardcoded</td><td>Non configurabile via env</td></tr>
    </table>
  </div>

  <div class="card">
    <h3>Architettura place_bet() — Flusso Guard</h3>
    <pre>Request
  |-> Auth (X-API-Key via hmac.compare_digest)
  |-> Rate Limit (50/min, sliding window)
  |-> Input Validation (direction, confidence, size)
  |-> Dead Hours Filter (skip se ora in DEAD_HOURS_UTC)
  |-> XGB Dual Gate (direzione deve matchare XGBoost)
  |-> DOWN Kill Switch (DISABLE_DOWN_BETS env)
  |-> Pre-flight (bot_paused + circuit breaker 5 loss)
  |-> Slippage Guard (max 0.5% drift)
  |-> DRY_RUN check
  |-> Position Management (pyramid logic, max 2 open)
  |-> Kraken Market Order
  |-> Supabase Write
  |-> Response</pre>
    <p style="margin-top: 8px; color: var(--muted);">12 step sequenziali. Fail-open: se Kraken/Supabase e' giu', il trade procede. Latenza worst-case: 5-8 secondi.</p>
  </div>

  <div class="card">
    <h3>Sicurezza</h3>
    <div class="grid-2">
      <div>
        <p style="color: var(--green); font-weight: 600; margin-bottom: 8px;">Implementato</p>
        <ul>
          <li>API key con <code>hmac.compare_digest()</code> (timing-safe)</li>
          <li>3 livelli auth (admin, read-only, cockpit)</li>
          <li>No secrets hardcoded nel codice</li>
          <li>Contribution token con scadenza 2h</li>
          <li>Supabase REST API (no SQL injection)</li>
        </ul>
      </div>
      <div>
        <p style="color: var(--red); font-weight: 600; margin-bottom: 8px;">Gap</p>
        <ul>
          <li>CSP con <code>unsafe-inline</code> (XSS risk)</li>
          <li>No CSRF protection sui POST</li>
          <li>No permission model (flat auth)</li>
          <li>Rate limit bypassabile (Railway LB)</li>
          <li>Gunicorn single worker (no concurrency)</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 5: FRONTEND -->
<!-- ============================================================ -->
<div class="section" id="frontend">
  <div class="section-header">
    <div class="section-num">5</div>
    <h2>Frontend (12 pagine HTML)</h2>
  </div>

  <div class="card">
    <h3>UI/UX Highlights</h3>
    <div class="grid-2">
      <div>
        <p style="color: var(--green); font-weight: 600; margin-bottom: 8px;">Punti di Forza</p>
        <ul>
          <li>Design system dark coerente con accenti neon (#00d4ff, #f7931a, #00ff88)</li>
          <li>Hero sections con gradient, glassmorphism, animazioni fade-in</li>
          <li>Tipografia professionale (Syne, JetBrains Mono, Playfair Display)</li>
          <li>Micro-interazioni sofisticate (glitch effect, matrix rain, pulse)</li>
          <li>Live ticker BTC/USDT, Fear & Greed, equity</li>
          <li>TradingView LWC v4 con smart CDN fallback</li>
          <li>Mobile-responsive con tab bar bottom, hamburger nav</li>
          <li>SEO eccellente: JSON-LD, Open Graph, Twitter Card</li>
        </ul>
      </div>
      <div>
        <p style="color: var(--red); font-weight: 600; margin-bottom: 8px;">Da Migliorare</p>
        <ul>
          <li><strong>index.html = 411 KB</strong> (non minificato) — performance critica</li>
          <li>~3000 righe JS monolitico nel dashboard</li>
          <li>Memory leak risk: <code>setInterval</code> mai cleared su tab switch</li>
          <li>Accessibility scarsa: no ARIA su tabelle dati, no <code>aria-live</code></li>
          <li>Nessun sistema di componenti riutilizzabili</li>
          <li>Contrast borderline su testo secondario (4.2:1 WCAG AA only)</li>
          <li>Nessun loading state per fetch async</li>
          <li>Nessun code splitting o lazy loading</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Feature Mancanti per un Trading Dashboard Produzione</h3>
    <table>
      <tr><th>Feature</th><th>Priorita'</th><th>Status</th></tr>
      <tr><td>Equity curve live (chart)</td><td><span class="ptag p1">P1</span></td><td>Solo tabelle statiche</td></tr>
      <tr><td>Position management UI (SL/TP manuale, close)</td><td><span class="ptag p1">P1</span></td><td>Mancante</td></tr>
      <tr><td>Risk dashboard (drawdown alert, margin ratio)</td><td><span class="ptag p1">P1</span></td><td>Mancante</td></tr>
      <tr><td>Model explainability (SHAP, feature importance chart)</td><td><span class="ptag p2">P2</span></td><td>Mancante</td></tr>
      <tr><td>Export PDF / CSV performance</td><td><span class="ptag p2">P2</span></td><td>Mancante</td></tr>
      <tr><td>Backtest visualizer</td><td><span class="ptag p2">P2</span></td><td>Solo CLI</td></tr>
      <tr><td>Dark/Light mode toggle</td><td><span class="ptag p2">P2</span></td><td>Solo dark</td></tr>
      <tr><td>Regime indicator su chart</td><td><span class="ptag p2">P2</span></td><td>Mancante</td></tr>
      <tr><td>Notification center persistente</td><td><span class="ptag p2">P2</span></td><td>Solo banner</td></tr>
    </table>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 6: INFRASTRUTTURA -->
<!-- ============================================================ -->
<div class="section" id="infra">
  <div class="section-header">
    <div class="section-num">6</div>
    <h2>Infrastruttura</h2>
  </div>

  <div class="card">
    <h3>Topologia Cloud</h3>
    <pre>
Railway (US)                Supabase (EU)            n8n VPS (Hostinger)
Flask + Gunicorn ---------> Postgres (btc_predictions) <------- 6 workflow critici
v2.5.2, auto-deploy         cockpit_events              Docker + Traefik
Single worker               cockpit_log                  2GB RAM, 0.9 CPU
  |                         RLS: disabled               SSL: Let's Encrypt
  |
  |---> Kraken Futures API (PF_XBTUSD)
  |---> Polygon PoS (BTCBotAudit.sol @ 0xe466...55)
  |---> Binance API (price feed)
  |---> Telegram (alerts)</pre>
  </div>

  <div class="card">
    <h3>n8n Workflow Status</h3>
    <table>
      <tr><th>Workflow</th><th>Status</th><th>Trigger</th><th>Note</th></tr>
      <tr><td>01A Get Signals</td><td><span class="badge green">ACTIVE</span></td><td>6 min</td><td>OK</td></tr>
      <tr><td>01B Prediction Bot</td><td><span class="badge green">ACTIVE</span></td><td>01A complete</td><td>OK</td></tr>
      <tr><td>02 Trade Checker</td><td><span class="badge green">ACTIVE</span></td><td>Hourly</td><td>OK</td></tr>
      <tr><td>05 Prediction Verifier</td><td><span class="badge green">ACTIVE</span></td><td>Daily</td><td>OK</td></tr>
      <tr><td>08 Position Monitor</td><td><span class="badge red">INACTIVE</span></td><td>5 min</td><td style="color:var(--red)"><strong>DA VERIFICARE</strong></td></tr>
      <tr><td>10 Daily Retrain</td><td><span class="badge green">ACTIVE</span></td><td>03:00 UTC</td><td>OK</td></tr>
    </table>
    <p style="margin-top: 12px; color:var(--yellow);">wf08 Position Monitor e' <strong>INATTIVO</strong>. Questo workflow valuta i ghost signal a T+30min. Se spento, i nuovi segnali non vengono valutati e il dataset per il retrain non cresce.</p>
  </div>

  <div class="card">
    <h3>Gap Infrastrutturali</h3>
    <table>
      <tr><th>Area</th><th>Status</th><th>Rischio</th></tr>
      <tr><td>Gunicorn workers</td><td>1 worker (default)</td><td><span class="severity-high">HIGH</span> — no concurrency</td></tr>
      <tr><td>Health check Railway</td><td>Non configurato</td><td><span class="severity-medium">MEDIUM</span></td></tr>
      <tr><td>Secrets in .mcp.json</td><td>Committati in git</td><td><span class="severity-critical">CRITICAL</span></td></tr>
      <tr><td>Distributed tracing</td><td>Assente</td><td><span class="severity-medium">MEDIUM</span></td></tr>
      <tr><td>Integration tests</td><td>Solo smoke test (23 casi)</td><td><span class="severity-high">HIGH</span></td></tr>
      <tr><td>Docker user</td><td>Esegue come root</td><td><span class="severity-medium">MEDIUM</span></td></tr>
      <tr><td>cockpit_log cleanup</td><td>Manuale</td><td><span class="severity-low">LOW</span></td></tr>
    </table>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 7: SCORECARD COMPLESSIVA -->
<!-- ============================================================ -->
<div class="section" id="scores">
  <div class="section-header">
    <div class="section-num">7</div>
    <h2>Scorecard Complessiva</h2>
  </div>

  <div class="card">
    <div class="score-row">
      <div class="score-label">UI/UX Design</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:80%; background: linear-gradient(90deg, var(--accent), var(--accent2));"></div></div>
      <div class="score-val" style="color: var(--green);">8/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">Backend Architecture</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:78%; background: linear-gradient(90deg, var(--accent), var(--accent2));"></div></div>
      <div class="score-val" style="color: var(--green);">7.8/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">Trading Logic</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:80%; background: linear-gradient(90deg, var(--accent), var(--accent2));"></div></div>
      <div class="score-val" style="color: var(--green);">8/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">On-Chain Integration</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:80%; background: linear-gradient(90deg, var(--accent), var(--accent2));"></div></div>
      <div class="score-val" style="color: var(--green);">8/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">API Design</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:80%; background: linear-gradient(90deg, var(--accent), var(--accent2));"></div></div>
      <div class="score-val" style="color: var(--green);">8/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">ML Pipeline</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:55%; background: linear-gradient(90deg, var(--yellow), var(--orange));"></div></div>
      <div class="score-val" style="color: var(--yellow);">5.5/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">Data Quality</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:50%; background: linear-gradient(90deg, var(--yellow), var(--orange));"></div></div>
      <div class="score-val" style="color: var(--yellow);">5/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">Frontend Performance</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:40%; background: linear-gradient(90deg, var(--red), var(--orange));"></div></div>
      <div class="score-val" style="color: var(--red);">4/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">Accessibility</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:50%; background: linear-gradient(90deg, var(--yellow), var(--orange));"></div></div>
      <div class="score-val" style="color: var(--yellow);">5/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">Security</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:72%; background: linear-gradient(90deg, var(--accent), var(--accent2));"></div></div>
      <div class="score-val" style="color: var(--green);">7.2/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">Testing</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:55%; background: linear-gradient(90deg, var(--yellow), var(--orange));"></div></div>
      <div class="score-val" style="color: var(--yellow);">5.5/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">Monitoring</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:60%; background: linear-gradient(90deg, var(--yellow), var(--accent));"></div></div>
      <div class="score-val" style="color: var(--yellow);">6/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">SEO / Meta</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:90%; background: linear-gradient(90deg, var(--green), var(--accent));"></div></div>
      <div class="score-val" style="color: var(--green);">9/10</div>
    </div>
    <div class="score-row">
      <div class="score-label">Documentation</div>
      <div class="score-bar-bg"><div class="score-bar" style="width:85%; background: linear-gradient(90deg, var(--green), var(--accent));"></div></div>
      <div class="score-val" style="color: var(--green);">8.5/10</div>
    </div>

    <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border); text-align: center;">
      <div style="font-size: 12px; color: var(--muted); text-transform: uppercase; letter-spacing: 1px;">Score Complessivo Sistema</div>
      <div style="font-family: 'Syne', sans-serif; font-size: 48px; font-weight: 800; background: linear-gradient(135deg, var(--accent), var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-top: 8px;">6.8 / 10</div>
      <div style="color: var(--muted); font-size: 13px; margin-top: 4px;">Fondamenta solide. ML pipeline e performance frontend sono i colli di bottiglia.</div>
    </div>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 8: DECISIONI STRATEGICHE -->
<!-- ============================================================ -->
<div class="section" id="decisions">
  <div class="section-header">
    <div class="section-num">8</div>
    <h2>Decisioni Strategiche</h2>
  </div>

  <div class="decision-box">
    <h4>DECISIONE 1 — Cosa fare col modello che predice al contrario?</h4>
    <ul>
      <li><strong>Opzione A — Direction Breaker</strong>: Invertire ogni segnale. Semplice, WR immediato ~61%. Rischio: se il bias cambia, perdi il vantaggio.</li>
      <li><strong>Opzione B — Ribilanciare il prompt wf01B</strong>: Simmetrizzare regole bearish/bullish, aggiungere direction breaker come safety net. Fix strutturale.</li>
      <li><strong>Opzione C — Swap modello</strong>: Passare da Gemini Flash a Claude Sonnet per reasoning migliore. Costo piu' alto, potenzialmente piu' accurato.</li>
      <li><strong>Raccomandazione</strong>: <span style="color:var(--accent); font-weight:700;">B + A come safety</span>. Fix il prompt (causa), aggiungi direction breaker (effetto), monitora per 48h, poi rivaluta.</li>
    </ul>
  </div>

  <div class="decision-box">
    <h4>DECISIONE 2 — Come gestire il dataset di 16 ore?</h4>
    <ul>
      <li><strong>Opzione A — Aspettare</strong>: Accumula 2+ settimane di dati ghost (>2000 samples), poi retrain. Conservativo, zero rischio.</li>
      <li><strong>Opzione B — Backfill storico</strong>: Rievaluare retroattivamente predizioni senza ghost_correct usando Binance klines. Piu' dati subito.</li>
      <li><strong>Opzione C — Disabilitare XGBoost</strong>: Usare solo LLM + dead hours + direction breaker. Semplifica il sistema, riduci complessita'.</li>
      <li><strong>Raccomandazione</strong>: <span style="color:var(--accent); font-weight:700;">A + C</span>. Disabilita XGBoost (non aggiunge alpha con 162 samples), accumula dati, riattiva dopo 2000+ ghost con diversita' temporale.</li>
    </ul>
  </div>

  <div class="decision-box">
    <h4>DECISIONE 3 — Confidence invertita: alzare threshold o ignorarla?</h4>
    <ul>
      <li><strong>Opzione A — Abbassare threshold</strong>: Da 0.56 a 0.50 (accetta tutto). Se la confidence non e' informativa, non filtrare su di essa.</li>
      <li><strong>Opzione B — Invertire la logica</strong>: Filtrare i segnali con confidence BASSA (< 0.60), che hanno WR migliore.</li>
      <li><strong>Opzione C — Rimuovere confidence dal flow</strong>: Non usare confidence per filtrare. Usare solo direction + dead hours + XGB.</li>
      <li><strong>Raccomandazione</strong>: <span style="color:var(--accent); font-weight:700;">C</span>. La confidence e' un proxy del consensus LLM, non della qualita' del segnale. Rimuoverla dal filtering semplifica senza perdere accuracy.</li>
    </ul>
  </div>

  <div class="decision-box">
    <h4>DECISIONE 4 — Priorita' frontend: ottimizzare o aggiungere feature?</h4>
    <ul>
      <li><strong>Opzione A — Performance first</strong>: Minificare index.html (411KB -> 150KB), code split, lazy load. Core Web Vitals per SEO.</li>
      <li><strong>Opzione B — Features first</strong>: Aggiungere equity curve, position management, risk dashboard. Funzionalita' trading-critical.</li>
      <li><strong>Opzione C — Design system first</strong>: Estrarre componenti, creare system di design tokens, documentare. Investimento per scalare.</li>
      <li><strong>Raccomandazione</strong>: <span style="color:var(--accent); font-weight:700;">A poi B</span>. La performance e' il problema piu' visibile (411KB blocca il caricamento). Poi aggiungi le feature trading-critical.</li>
    </ul>
  </div>

  <div class="decision-box">
    <h4>DECISIONE 5 — Secrets in .mcp.json committati in git</h4>
    <ul>
      <li><strong>Azione richiesta</strong>: Ruotare TUTTE le chiavi esposte (Supabase service key, n8n API key). Aggiungere <code>.mcp.json</code> a <code>.gitignore</code>.</li>
      <li><strong>Urgenza</strong>: <span style="color:var(--red); font-weight:700;">IMMEDIATA</span> — se il repo e' pubblico, le chiavi sono compromesse.</li>
    </ul>
  </div>
</div>

<!-- ============================================================ -->
<!-- SECTION 9: ROADMAP -->
<!-- ============================================================ -->
<div class="section" id="roadmap">
  <div class="section-header">
    <div class="section-num">9</div>
    <h2>Roadmap Prioritizzata</h2>
  </div>

  <div class="card">
    <h3><span class="ptag p0">P0</span> Questa Settimana (3-7 Marzo)</h3>
    <table>
      <tr><th>#</th><th>Task</th><th>Effort</th><th>Impatto</th></tr>
      <tr><td>1</td><td>Direction breaker + simmetrizzazione prompt wf01B</td><td>2h</td><td>WR 38% -> ~55-60%</td></tr>
      <tr><td>2</td><td>Dead hours filter: disabilitare ore 00-10 UTC</td><td>30min</td><td>Rimuove ~40% delle predizioni peggiori</td></tr>
      <tr><td>3</td><td>Ruotare secrets .mcp.json + .gitignore</td><td>30min</td><td>Security critica</td></tr>
      <tr><td>4</td><td>Fix rate limit: <code>X-Forwarded-For</code> invece di <code>remote_addr</code></td><td>15min</td><td>Rate limit funzionante</td></tr>
      <tr><td>5</td><td>Feature count validation in <code>_run_xgb_gate()</code></td><td>15min</td><td>Previene crash produzione</td></tr>
      <tr><td>6</td><td>Verificare perche' wf08 e' inattivo</td><td>15min</td><td>Ghost evaluation bloccata</td></tr>
    </table>
  </div>

  <div class="card">
    <h3><span class="ptag p1">P1</span> Prossime 2 Settimane (8-21 Marzo)</h3>
    <table>
      <tr><th>#</th><th>Task</th><th>Effort</th><th>Impatto</th></tr>
      <tr><td>7</td><td>Calibration table dinamica da Supabase (non hardcoded)</td><td>1h</td><td>Bet sizing corretto</td></tr>
      <tr><td>8</td><td>Gunicorn multi-worker (4 workers, timeout 120s)</td><td>15min</td><td>Concurrency + resilienza</td></tr>
      <tr><td>9</td><td>Minificare index.html (411KB -> &lt;150KB)</td><td>3h</td><td>Core Web Vitals</td></tr>
      <tr><td>10</td><td>ARIA labels su tabelle dati + componenti real-time</td><td>2h</td><td>Accessibility WCAG AA</td></tr>
      <tr><td>11</td><td>CSP headers: rimuovere unsafe-inline</td><td>2h</td><td>XSS prevention</td></tr>
      <tr><td>12</td><td><code>import requests</code> in train_xgboost.py</td><td>1min</td><td>Telegram alerts funzionanti</td></tr>
      <tr><td>13</td><td>MIN_SAMPLES 50 -> 100 in train_xgboost.py</td><td>1min</td><td>CV piu' stabile</td></tr>
    </table>
  </div>

  <div class="card">
    <h3><span class="ptag p2">P2</span> Prossimo Mese (Aprile 2026)</h3>
    <table>
      <tr><th>#</th><th>Task</th><th>Effort</th><th>Impatto</th></tr>
      <tr><td>14</td><td>Position management UI (SL/TP manuale, force close)</td><td>8h</td><td>UX trading-critical</td></tr>
      <tr><td>15</td><td>Equity curve chart live</td><td>4h</td><td>Visualizzazione performance</td></tr>
      <tr><td>16</td><td>Regime detection come feature XGBoost</td><td>4h</td><td>Model quality</td></tr>
      <tr><td>17</td><td>Integration tests con mock Kraken/Supabase</td><td>8h</td><td>Reliability</td></tr>
      <tr><td>18</td><td>Refactor app.py in moduli (routes/, services/)</td><td>16h</td><td>Maintainability</td></tr>
      <tr><td>19</td><td>OpenTelemetry + distributed tracing</td><td>8h</td><td>Observability</td></tr>
      <tr><td>20</td><td>Swap Gemini -> Claude Sonnet per predizioni</td><td>4h</td><td>Reasoning quality</td></tr>
    </table>
  </div>
</div>

</div><!-- /main -->

<!-- FOOTER -->
<div class="footer">
  BTC Predictor System Audit &middot; Generato automaticamente da Claude Code (Opus 4.6) &middot; 2 Marzo 2026 &middot; Sessione di audit completa<br>
  Mattia Calastri &middot; btcpredictor.io
</div>

</body>
</html>